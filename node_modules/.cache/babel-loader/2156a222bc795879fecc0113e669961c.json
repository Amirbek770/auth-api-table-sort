{"ast":null,"code":"import _regeneratorRuntime from\"/Users/amirbek/Documents/Myprojects/auth-api-table-sort/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/amirbek/Documents/Myprojects/auth-api-table-sort/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/amirbek/Documents/Myprojects/auth-api-table-sort/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{ProductAPI}from\"./API/productAPI\";import Datatable from\"./Components/Datatable\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Home(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),q=_useState4[0],setQ=_useState4[1];var _useState5=useState([\"name\"]),_useState6=_slicedToArray(_useState5,2),searchColumns=_useState6[0],setSearchColumns=_useState6[1];var getProduct=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,token,response,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url=\"https://face.ox-sys.com/variations?size=1000&page=1\";token=localStorage.getItem(\"token\");_context.next=4;return fetch(url,{method:\"GET\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\",Authorization:\"Bearer \"+token}});case 4:response=_context.sent;_context.next=7;return response.json();case 7:res=_context.sent;setData(res.items);case 9:case\"end\":return _context.stop();}}},_callee);}));return function getProduct(){return _ref.apply(this,arguments);};}();function search(rows){return rows.sort().filter(function(row){return searchColumns.some(function(column){return row[column].toString().toLowerCase().indexOf(q.toLowerCase())>-1;});});}var columns=data[0]&&Object.keys(data[0]);useEffect(function(){getProduct();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:q,onChange:function onChange(e){return setQ(e.target.value);}}),/*#__PURE__*/_jsxs(\"table\",{cellPadding:0,cellSpacing:0,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"th\",{children:\"name\"})})}),/*#__PURE__*/_jsx(Datatable,{data:search(data)})]})]});}","map":{"version":3,"sources":["/Users/amirbek/Documents/Myprojects/auth-api-table-sort/src/Home.js"],"names":["React","useEffect","useState","ProductAPI","Datatable","Home","data","setData","q","setQ","searchColumns","setSearchColumns","getProduct","url","token","localStorage","getItem","fetch","method","headers","Authorization","response","json","res","items","search","rows","sort","filter","row","some","column","toString","toLowerCase","indexOf","columns","Object","keys","e","target","value"],"mappings":"ugBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,SAAP,KAAsB,wBAAtB,C,wFAEA,cAAe,SAASC,CAAAA,IAAT,EAAgB,CAC7B,cAAwBH,QAAQ,CAAC,EAAD,CAAhC,wCAAOI,IAAP,eAAaC,OAAb,eACA,eAAkBL,QAAQ,CAAC,EAAD,CAA1B,yCAAOM,CAAP,eAAUC,IAAV,eACA,eAA0CP,QAAQ,CAAC,CAAC,MAAD,CAAD,CAAlD,yCAAOQ,aAAP,eAAsBC,gBAAtB,eAEA,GAAMC,CAAAA,UAAU,0FAAG,8JACXC,GADW,uDAEXC,KAFW,CAEHC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAFG,uBAGMC,CAAAA,KAAK,CAACJ,GAAD,CAAM,CAChCK,MAAM,CAAE,KADwB,CAEhCC,OAAO,CAAE,CACP,eAAgB,mCADT,CAEPC,aAAa,CAAE,UAAYN,KAFpB,CAFuB,CAAN,CAHX,QAGXO,QAHW,qCAWCA,CAAAA,QAAQ,CAACC,IAAT,EAXD,QAWXC,GAXW,eAYjBhB,OAAO,CAACgB,GAAG,CAACC,KAAL,CAAP,CAZiB,sDAAH,kBAAVZ,CAAAA,UAAU,0CAAhB,CAeA,QAASa,CAAAA,MAAT,CAAgBC,IAAhB,CAAsB,CACpB,MAAOA,CAAAA,IAAI,CAACC,IAAL,GAAYC,MAAZ,CAAmB,SAACC,GAAD,QACxBnB,CAAAA,aAAa,CAACoB,IAAd,CACE,SAACC,MAAD,QACEF,CAAAA,GAAG,CAACE,MAAD,CAAH,CAAYC,QAAZ,GAAuBC,WAAvB,GAAqCC,OAArC,CAA6C1B,CAAC,CAACyB,WAAF,EAA7C,EAAgE,CAAC,CADnE,EADF,CADwB,EAAnB,CAAP,CAMD,CAED,GAAME,CAAAA,OAAO,CAAG7B,IAAI,CAAC,CAAD,CAAJ,EAAW8B,MAAM,CAACC,IAAP,CAAY/B,IAAI,CAAC,CAAD,CAAhB,CAA3B,CAEAL,SAAS,CAAC,UAAM,CACdW,UAAU,GACX,CAFQ,CAEN,EAFM,CAAT,CAIA,mBACE,oCACE,cACI,IAAI,CAAC,MADT,CAEI,KAAK,CAAEJ,CAFX,CAGI,QAAQ,CAAE,kBAAC8B,CAAD,QAAO7B,CAAAA,IAAI,CAAC6B,CAAC,CAACC,MAAF,CAASC,KAAV,CAAX,EAHd,EADF,cAME,eAAO,WAAW,CAAE,CAApB,CAAuB,WAAW,CAAE,CAApC,wBACE,oCACA,iCACE,4BADF,EADA,EADF,cAME,KAAC,SAAD,EAAW,IAAI,CAAEf,MAAM,CAACnB,IAAD,CAAvB,EANF,GANF,GADF,CAiBD","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { ProductAPI } from \"./API/productAPI\";\nimport Datatable from \"./Components/Datatable\";\n\nexport default function Home() {\n  const [data, setData] = useState([]);\n  const [q, setQ] = useState(\"\");\n  const [searchColumns, setSearchColumns] = useState([\"name\"]);\n\n  const getProduct = async () => {\n    const url = `https://face.ox-sys.com/variations?size=1000&page=1`;\n    const token = localStorage.getItem(\"token\");\n    const response = await fetch(url, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n        Authorization: \"Bearer \" + token,\n      },\n    });\n\n    const res = await response.json();\n    setData(res.items);\n  };\n\n  function search(rows) {\n    return rows.sort().filter((row) =>\n      searchColumns.some(\n        (column) =>\n          row[column].toString().toLowerCase().indexOf(q.toLowerCase()) > -1\n      )\n    );\n  }\n\n  const columns = data[0] && Object.keys(data[0]);\n\n  useEffect(() => {\n    getProduct();\n  }, []);\n\n  return (\n    <div>\n      <input\n          type='text'\n          value={q}\n          onChange={(e) => setQ(e.target.value)}\n        />  \n      <table cellPadding={0} cellSpacing={0}>\n        <thead>\n        <tr>\n          <th>name</th>\n        </tr>\n        </thead>\n        <Datatable data={search(data)} />\n      </table>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}